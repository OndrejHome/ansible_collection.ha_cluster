{"version": 2, "width": 159, "height": 55, "timestamp": 1549792597, "env": {"SHELL": "/bin/bash", "TERM": "rxvt-unicode"}}
[0.507828, "o", "[user@examples ~]$ cat /etc/redhat-release\r\n"]
[0.509057, "o", "Fedora release 29 (Twenty Nine)\r\n"]
[1.514645, "o", "[user@examples ~]$ ansible --version\r\n"]
[1.900964, "o", "ansible 2.7.5\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.2 (default, Jan 16 2019, 19:49:22) [GCC 8.2.1 20181215 (Red Hat 8.2.1-6)]\r\n"]
[2.942172, "o", "[user@examples ~]$ cat our_environment\r\n"]
[2.944023, "o", "============================================================\r\nKVM running 2 VMs with following configuration.\r\nKey for fence_xvm is located at /etc/cluster/fence_xvm.key\r\non machine from which we run ansible.\r\nVM-1:\r\n  IP address:  192.168.22.43\r\n  VM name:     fastvm-fedora29-41 (as seen by hypervisor)\r\n  VM hostname: fastvm-fedora29-41\r\nVM-2:\r\n  IP address:  192.168.22.44\r\n  VM name:     fastvm-fedora29-42 (as seen by hypervisor)\r\n  VM hostname: fastvm-fedora29-42\r\n============================================================\r\n"]
[4.948177, "o", "[user@examples ~]$ ls -l /etc/cluster/fence_xvm.key\r\n"]
[4.956546, "o", "-rw-r--r--. 1 root root 4096 Feb 10 18:42 /etc/cluster/fence_xvm.key\r\n"]
[6.959685, "o", "[user@examples ~]$ ansible-galaxy install OndrejHome.ha-cluster-pacemaker,19.0.0 OndrejHome.pcs-modules-2,19.0.0 -p roles\r\n"]
[7.377249, "o", "- downloading role 'ha-cluster-pacemaker', owned by OndrejHome\r\n"]
[8.214776, "o", "- downloading role from https://github.com/OndrejHome/ansible.ha-cluster-pacemaker/archive/19.0.0.tar.gz\r\n"]
[8.400568, "o", "- extracting OndrejHome.ha-cluster-pacemaker to /home/user/roles/OndrejHome.ha-cluster-pacemaker\r\n"]
[8.413634, "o", "- OndrejHome.ha-cluster-pacemaker (19.0.0) was installed successfully\r\n"]
[8.414482, "o", "- dependency OndrejHome.pcs-modules-2 already pending installation.\r\n"]
[8.538856, "o", "- downloading role 'pcs-modules-2', owned by OndrejHome\r\n"]
[8.683374, "o", "- downloading role from https://github.com/OndrejHome/ansible.pcs-modules-2/archive/19.0.0.tar.gz\r\n"]
[9.070245, "o", "- extracting OndrejHome.pcs-modules-2 to /home/user/roles/OndrejHome.pcs-modules-2\r\n"]
[9.084854, "o", "- OndrejHome.pcs-modules-2 (19.0.0) was installed successfully\r\n"]
[11.175339, "o", "[user@examples ~]$ cat hosts-default\r\n"]
[11.177217, "o", "[servers]\r\n192.168.22.43 vm_name=fastvm-fedora29-43 ansible_python_interpreter=/usr/bin/python3\r\n192.168.22.44 vm_name=fastvm-fedora29-44 ansible_python_interpreter=/usr/bin/python3\r\n"]
[13.180909, "o", "[user@examples ~]$ cat playbook-default.yml\r\n"]
[13.182766, "o", "---\r\n- hosts: servers\r\n  remote_user: root\r\n  roles:\r\n  - { role: OndrejHome.ha-cluster-pacemaker }\r\n"]
[14.186611, "o", "[user@examples ~]$ ansible-playbook -i hosts-default playbook-default.yml\r\n"]
[14.799263, "o", "\r\nPLAY [servers] *****************************************************************\r\n"]
[14.807087, "o", "\r\nTASK [Gathering Facts] *********************************************************\r\n"]
[15.112072, "o", "\u001b[0;32mok: [192.168.22.44]\u001b[0m\r\n"]
[15.123449, "o", "\u001b[0;32mok: [192.168.22.43]\u001b[0m\r\n"]
[15.155427, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Check if cluster consist of at least 2 nodes] ***\r\n"]
[15.197645, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[15.226847, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Include distribution version specific variables - RHEL/CentOS] ***\r\n"]
[15.262404, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[15.281739, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[15.299163, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Include distribution version specific variables - Fedora] ***\r\n"]
[15.349371, "o", "\u001b[0;32mok: [192.168.22.43]\u001b[0m\r\n"]
[15.362003, "o", "\u001b[0;32mok: [192.168.22.44]\u001b[0m\r\n"]
[15.370332, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : (RHEL only) enable repositories] *******\r\n"]
[15.385355, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[15.39586, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[15.406178, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install packages from local media] *****\r\n"]
[15.423355, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[15.435292, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[15.445638, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install packages from system defined repositories] ***\r\n"]
[15.496148, "o", "\u001b[0;36mincluded: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/install_normal.yml for 192.168.22.43, 192.168.22.44\u001b[0m\r\n"]
[15.509822, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install libselinux-python to work with SELinux setting] ***\r\n"]
[16.572214, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[17.114215, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[17.132154, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install Pacemaker cluster packages to all nodes] ***\r\n"]
[18.215214, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[18.607093, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[18.621416, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install python3 package for manipulating firewalld] ***\r\n"]
[19.32573, "o", "\u001b[0;32mok: [192.168.22.43]\u001b[0m\r\n"]
[19.362235, "o", "\u001b[0;32mok: [192.168.22.44]\u001b[0m\r\n"]
[19.37146, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install package(s) for fence_xvm] ******\r\n"]
[22.124713, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[22.274657, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[22.281892, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install package(s) for fence_kdump] ****\r\n"]
[22.299862, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[22.328204, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[22.363534, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Add hosts to /etc/hosts] ***************\r\n"]
[22.917964, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=192.168.22.43)\u001b[0m\r\n"]
[22.92043, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.43)\u001b[0m\r\n"]
[23.536014, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.44)\u001b[0m\r\n"]
[23.537749, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=192.168.22.44)\u001b[0m\r\n"]
[23.544683, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create cluster system group] ***********\r\n"]
[24.061206, "o", "\u001b[0;32mok: [192.168.22.43]\u001b[0m\r\n"]
[24.062201, "o", "\u001b[0;32mok: [192.168.22.44]\u001b[0m\r\n"]
[24.069681, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create cluster system user] ************\r\n"]
[25.287422, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[25.296023, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[25.326682, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable/Disable PCSD web GUI] ***********\r\n"]
[25.371168, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[25.388952, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[25.403671, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable and start PCSD service] *********\r\n"]
[26.624005, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[26.880439, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[26.893156, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup firewall for RHEL/CentOS systems] ***\r\n"]
[26.910735, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[26.91995, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[26.927988, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup firewall for Fedora systems] *****\r\n"]
[26.966985, "o", "\u001b[0;36mincluded: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/firewall-fedora29.yml for 192.168.22.43, 192.168.22.44\u001b[0m\r\n"]
[26.97998, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable 'high-availability' firewalld service] ***\r\n"]
[27.757411, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[27.77529, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[27.804743, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Authorize cluster nodes] ***************\r\n"]
[28.917274, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=192.168.22.43)\u001b[0m\r\n"]
[28.927603, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.43)\u001b[0m\r\n"]
[28.210143, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.44)\u001b[0m\r\n"]
[28.218007, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=192.168.22.44)\u001b[0m\r\n"]
[28.248916, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup cluster] *************************\r\n"]
[29.607879, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[29.638944, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Start cluster services on all nodes] ***\r\n"]
[30.819036, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=pacemaker)\u001b[0m\r\n"]
[30.92838, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=pacemaker)\u001b[0m\r\n"]
[31.681836, "o", "\u001b[0;32mok: [192.168.22.43] => (item=corosync)\u001b[0m\r\n"]
[31.690233, "o", "\u001b[0;32mok: [192.168.22.44] => (item=corosync)\u001b[0m\r\n"]
[31.722333, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable cluster services on boot] *******\r\n"]
[32.74809, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=pacemaker)\u001b[0m\r\n"]
[32.824864, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=pacemaker)\u001b[0m\r\n"]
[33.609879, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=corosync)\u001b[0m\r\n"]
[33.647294, "o", "\u001b[0;33mchanged: [192.168.22.44] => (item=corosync)\u001b[0m\r\n"]
[33.654636, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup automatic fence_xvm] *************\r\n"]
[33.708001, "o", "\u001b[0;36mincluded: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/fence_xvm.yml for 192.168.22.43, 192.168.22.44\u001b[0m\r\n"]
[33.755391, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Check if 'vm_name' variable is defined for each node] ***\r\n"]
[33.781442, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[33.794245, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[33.80566, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create /etc/cluster directory] *********\r\n"]
[34.306961, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[34.30736, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[34.315303, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Copy fence_xvm key to all cluster nodes] ***\r\n"]
[35.442986, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m\r\n"]
[35.445727, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[35.452736, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable fence_xvm port(1229/tcp) in firewalld] ***\r\n"]
[36.562695, "o", "\u001b[0;33mchanged: [192.168.22.43]\u001b[0m"]
[36.563185, "o", "\r\n"]
[36.586405, "o", "\u001b[0;33mchanged: [192.168.22.44]\u001b[0m\r\n"]
[36.610963, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : create fence_xvm STONITH devices] ******\r\n"]
[37.915309, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.43)\u001b[0m\r\n"]
[38.385593, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.44)\u001b[0m\r\n"]
[38.408255, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : create fence constraints] **************\r\n"]
[39.654073, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.43)\u001b[0m\r\n"]
[39.900648, "o", "\u001b[0;33mchanged: [192.168.22.43] => (item=192.168.22.44)\u001b[0m\r\n"]
[39.90821, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup fence_kdump] *********************\r\n"]
[39.925393, "o", "\u001b[0;36mskipping: [192.168.22.43]\u001b[0m\r\n"]
[39.935861, "o", "\u001b[0;36mskipping: [192.168.22.44]\u001b[0m\r\n"]
[39.94622, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup custom fence devices] ************\r\n"]
[39.999589, "o", "\u001b[0;36mincluded: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/fence_custom.yml for 192.168.22.43, 192.168.22.44\u001b[0m\r\n"]
[40.041042, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create custom fence device] ************\r\n"]
[40.064409, "o", "\r\nPLAY RECAP *********************************************************************\r\n"]
[40.064777, "o", "\u001b[0;33m192.168.22.43\u001b[0m              : \u001b[0;32mok=24  \u001b[0m \u001b[0;33mchanged=16  \u001b[0m unreachable=0    failed=0   \r\n\u001b[0;33m192.168.22.44\u001b[0m              : \u001b[0;32mok=21  \u001b[0m \u001b[0;33mchanged=13  \u001b[0m unreachable=0    failed=0   \r\n\r\n"]
