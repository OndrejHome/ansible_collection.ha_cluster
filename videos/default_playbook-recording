{"version": 2, "width": 124, "height": 32, "timestamp": 1529932666, "env": {"SHELL": "/bin/bash", "TERM": "rxvt-unicode"}}
[1.105326, "o", "[user@examples ~]$ cat /etc/redhat-release\r\n"]
[1.109722, "o", "CentOS Linux release 7.5.1804 (Core) \r\n"]
[2.114748, "o", "[user@examples ~]$ ansible --version\r\n"]
[4.740177, "o", "ansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr 11 2018, 07:36:10) [GCC 4.8.5 20150623 (Red Hat 4.8.5-28)]\r\n"]
[5.803477, "o", "[user@examples ~]$ cat our_environment\r\n"]
[5.811975, "o", "============================================================                                        \r\nKVM running 2 VMs with following configuration.                                                     \r\nKey for fence_xvm is located at /etc/cluster/fence_xvm.key                                          \r\non machine from which we run ansible.                                                                                                                                                                   \r\nVM-1:                                                                                                 \r\n  IP address:  192.168.34.41                                                                          \r\n  VM name:     fastvm-centos-7.5-41 (as seen by hypervisor)                                           \r\n  VM hostname: fastvm-centos-7-5-41                                                                 \r\nVM-2:                                                                                                 "]
[5.812307, "o", "\r\n  IP address:  192.168.34.42                                                                          \r\n  VM name:     fastvm-centos-7.5-42 (as seen by hypervisor)                                           \r\n  VM hostname: fastvm-centos-7-5-42                                                                 \r\n============================================================  \r\n"]
[9.819228, "o", "[user@examples ~]$ ls -l /etc/cluster/fence_xvm.key\r\n"]
[9.833173, "o", "-rw-r--r--. 1 root root 4096 Jun 25 15:12 /etc/cluster/fence_xvm.key\r\n"]
[11.842688, "o", "[user@examples ~]$ ansible-galaxy install OndrejHome.ha-cluster-pacemaker -p roles\r\n"]
[12.667232, "o", "- downloading role 'ha-cluster-pacemaker', owned by OndrejHome\r\n"]
[13.807189, "o", "- downloading role from https://github.com/OndrejHome/ansible.ha-cluster-pacemaker/archive/v15.tar.gz\r\n"]
[14.468009, "o", "- extracting OndrejHome.ha-cluster-pacemaker to /home/user/roles/OndrejHome.ha-cluster-pacemaker\r\n"]
[14.492373, "o", "- OndrejHome.ha-cluster-pacemaker (v15) was installed successfully\r\n"]
[14.493324, "o", "- adding dependency: OndrejHome.pcs-modules-2\r\n"]
[15.420988, "o", "- downloading role 'pcs-modules-2', owned by OndrejHome\r\n"]
[16.377292, "o", "- downloading role from https://github.com/OndrejHome/ansible.pcs-modules-2/archive/v13.tar.gz\r\n"]
[18.945433, "o", "- extracting OndrejHome.pcs-modules-2 to /home/user/roles/OndrejHome.pcs-modules-2\r\n"]
[18.972915, "o", "- OndrejHome.pcs-modules-2 (v13) was installed successfully\r\n"]
[19.055642, "o", "[user@examples ~]$ cat hosts-default\r\n"]
[19.063637, "o", "[servers]                                                                                           \r\n192.168.34.41 vm_name=fastvm-centos-7.5-41                                                          \r\n192.168.34.42 vm_name=fastvm-centos-7.5-42 \r\n"]
[20.07059, "o", "[user@examples ~]$ cat playbook-default.yml\r\n"]
[20.076604, "o", "---                                                                                                 \r\n- hosts: servers                                                                                      \r\n  remote_user: root                                                                                   \r\n  roles:                                                                                                \r\n  - { role: OndrejHome.ha-cluster-pacemaker } \r\n"]
[22.084328, "o", "[user@examples ~]$ ansible-playbook -i hosts-default playbook-default.yml\r\n"]
[25.793896, "o", "\r\nPLAY [servers] *****************************************************************\r\n"]
[25.844199, "o", "\r\nTASK [Gathering Facts] *********************************************************\r\n"]
[26.306189, "o", "ok: [192.168.34.42]\r\n"]
[26.345404, "o", "ok: [192.168.34.41]\r\n"]
[26.372405, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Check if cluster consist of at least 2 nodes] ***\r\n"]
[26.424292, "o", "skipping: [192.168.34.41]\r\n"]
[26.454945, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Include distribution version specific variables] ***\r\n"]
[26.582341, "o", "ok: [192.168.34.41]\r\n"]
[26.623717, "o", "ok: [192.168.34.42]\r\n"]
[26.653601, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : (RHEL only) enable repositories] *******\r\n"]
[26.705898, "o", "skipping: [192.168.34.41]\r\n"]
[26.743818, "o", "skipping: [192.168.34.42]\r\n"]
[26.76875, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install packages from local media] *****\r\n"]
[26.819851, "o", "skipping: [192.168.34.41]\r\n"]
[26.861897, "o", "skipping: [192.168.34.42]\r\n"]
[26.882735, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install packages from system defined repositories] ***\r\n"]
[27.061837, "o", "included: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/install_normal.yml for 192.168.34.41, 192.168.34.42\r\n"]
[27.115846, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install libselinux-python to work with SELinux setting] ***\r\n"]
[29.599684, "o", "ok: [192.168.34.42]\r\n"]
[29.615329, "o", "ok: [192.168.34.41]\r\n"]
[29.647613, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Install Pacemaker cluster packages to all nodes] ***\r\n"]
[32.787408, "o", "changed: [192.168.34.42] => (item=[u'fence-agents', u'pcs', u'pacemaker'])\r\n"]
[32.872187, "o", "changed: [192.168.34.41] => (item=[u'fence-agents', u'pcs', u'pacemaker'])\r\n"]
[32.919688, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Add hosts to /etc/hosts] ***************\r\n"]
[34.767164, "o", "changed: [192.168.34.41] => (item=192.168.34.41)\r\n"]
[34.854613, "o", "changed: [192.168.34.42] => (item=192.168.34.41)\r\n"]
[35.829659, "o", "changed: [192.168.34.41] => (item=192.168.34.42)\r\n"]
[35.96175, "o", "changed: [192.168.34.42] => (item=192.168.34.42)\r\n"]
[36.001123, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create cluster system group] ***********\r\n"]
[37.631369, "o", "ok: [192.168.34.42]\r\n"]
[37.649758, "o", "ok: [192.168.34.41]\r\n"]
[37.674777, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create cluster system user] ************\r\n"]
[40.972162, "o", "changed: [192.168.34.42]\r\n"]
[40.987723, "o", "changed: [192.168.34.41]\r\n"]
[41.01193, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable/Disable PCSD web GUI] ***********\r\n"]
[41.072726, "o", "skipping: [192.168.34.41]\r\n"]
[41.104392, "o", "skipping: [192.168.34.42]\r\n"]
[41.135607, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable and start PCSD service] *********\r\n"]
[42.088722, "o", "changed: [192.168.34.41]\r\n"]
[42.160596, "o", "changed: [192.168.34.42]\r\n"]
[42.189084, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup firewall for RHEL/CentOS systems] ***\r\n"]
[42.368096, "o", "included: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/firewall-el7.yml for 192.168.34.41, 192.168.34.42\r\n"]
[42.44184, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable 'high-availability' firewalld service] ***\r\n"]
[43.892457, "o", "changed: [192.168.34.42]\r\n"]
[43.968069, "o", "changed: [192.168.34.41]\r\n"]
[43.994732, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Authorize cluster nodes] ***************\r\n"]
[44.078502, "o", "changed: [192.168.34.42] => (item=192.168.34.41)\r\n"]
[46.712956, "o", "changed: [192.168.34.41] => (item=192.168.34.41)\r\n"]
[47.255245, "o", "changed: [192.168.34.42] => (item=192.168.34.42)\r\n"]
[48.092286, "o", "changed: [192.168.34.41] => (item=192.168.34.42)\r\n"]
[48.119942, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup cluster] *************************\r\n"]
[49.334504, "o", "changed: [192.168.34.41]\r\n"]
[49.36293, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Start cluster services on all nodes] ***\r\n"]
[51.605305, "o", "changed: [192.168.34.41] => (item=pacemaker)\r\n"]
[51.787314, "o", "changed: [192.168.34.42] => (item=pacemaker)\r\n"]
[52.999219, "o", "ok: [192.168.34.41] => (item=corosync)\r\n"]
[53.17053, "o", "ok: [192.168.34.42] => (item=corosync)\r\n"]
[53.225845, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable cluster services on boot] *******\r\n"]
[54.741592, "o", "changed: [192.168.34.41] => (item=pacemaker)\r\n"]
[54.817495, "o", "changed: [192.168.34.42] => (item=pacemaker)\r\n"]
[56.066146, "o", "changed: [192.168.34.41] => (item=corosync)\r\n"]
[56.123481, "o", "changed: [192.168.34.42] => (item=corosync)\r\n"]
[56.164719, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup automatic fence_xvm] *************\r\n"]
[56.379247, "o", "included: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/fence_xvm.yml for 192.168.34.41, 192.168.34.42\r\n"]
[56.461188, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Check if 'vm_name' variable is defined for each node] ***\r\n"]
[56.520234, "o", "skipping: [192.168.34.41]\r\n"]
[56.554136, "o", "skipping: [192.168.34.42]\r\n"]
[56.588094, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create /etc/cluster directory] *********\r\n"]
[58.268148, "o", "changed: [192.168.34.41]\r\n"]
[58.286002, "o", "changed: [192.168.34.42]\r\n"]
[58.312188, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Copy fence_xvm key to all cluster nodes] ***\r\n"]
[59.396255, "o", "changed: [192.168.34.42]\r\n"]
[59.427118, "o", "changed: [192.168.34.41]\r\n"]
[59.448677, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Enable fence_xvm port(1229/tcp) in firewalld] ***\r\n"]
[60.19059, "o", "changed: [192.168.34.41]\r\n"]
[60.269638, "o", "changed: [192.168.34.42]\r\n"]
[60.29501, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : create fence_xvm STONITH devices] ******\r\n"]
[61.427358, "o", "changed: [192.168.34.41] => (item=192.168.34.41)\r\n"]
[62.922061, "o", "changed: [192.168.34.41] => (item=192.168.34.42)\r\n"]
[62.961179, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : create fence constraints] **************\r\n"]
[65.979618, "o", "changed: [192.168.34.41] => (item=192.168.34.41)\r\n"]
[68.352157, "o", "changed: [192.168.34.41] => (item=192.168.34.42)\r\n"]
[68.385759, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup fence_kdump] *********************\r\n"]
[68.444663, "o", "skipping: [192.168.34.41]\r\n"]
[68.482063, "o", "skipping: [192.168.34.42]\r\n"]
[68.511057, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Setup custom fence devices] ************\r\n"]
[68.671236, "o", "included: /home/user/roles/OndrejHome.ha-cluster-pacemaker/tasks/fence_custom.yml for 192.168.34.41, 192.168.34.42\r\n"]
[68.868536, "o", "\r\nTASK [OndrejHome.ha-cluster-pacemaker : Create custom fence device] ************\r\n"]
[68.92482, "o", "\r\nPLAY RECAP *********************************************************************\r\n192.168.34.41              : ok=22   changed=14   unreachable=0    failed=0   \r\n192.168.34.42              : ok=19   changed=11   unreachable=0    failed=0   \r\n\r\n"]
